<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Condu Sau Pierzi!</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .container {
      max-width: 600px;
      background: white;
      margin: 2em;
      padding: 2em;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      position: relative;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .question {
      margin: 1em 0;
      font-size: 1.2em;
    }
    .image {
      margin-bottom: 1em;
      text-align: center;
    }
    .image img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    .options button {
      display: block;
      margin: 0.5em 0;
      width: 100%;
      padding: 1em;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      background: #3498db;
      color: white;
      cursor: pointer;
    }
    .options button:hover {
      background: #2980b9;
    }
    .feedback {
      margin-top: 1em;
      padding: 1em;
      border-left: 5px solid #3498db;
      background: #ecf0f1;
      white-space: pre-wrap;
    }
    .status-bar {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 0.9em;
      color: #555;
    }
    .restart-btn {
      margin-top: 20px;
      padding: 0.8em 1.2em;
      font-size: 1em;
      background-color: #2ecc71;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .restart-btn:hover {
      background-color: #27ae60;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="status-bar" id="status">Scor: 0 | Timp: 0s</div>
    <h1>Condu Sau Pierzi!</h1>
    <div class="image" id="image"></div>
    <div class="question" id="question">Încărcare întrebare...</div>
    <div class="options" id="options"></div>
    <div class="feedback" id="feedback"></div>
    <button class="restart-btn" id="restart" style="display:none;" onclick="restartQuiz()">Reîncepe testul</button>
  </div>
  <script>
    const quiz = [
      {
        question: "Șoferul trece pe roșu într-o intersecție aglomerată. Ce tip de comportament este?",
        image: "images/red_light.jpg",
        options: ["Dangerous Driving", "Careless Driving", "Legal"],
        answer: 0,
        explanation: "Comportamentul este extrem de periculos, mai ales într-o intersecție aglomerată. Pui în pericol viața altor participanți la trafic.\\n\\\"Driving through a red traffic light can be considered dangerous driving if it presents an obvious risk to others.\\\"\\n– Road Traffic Act 1988, Section 2"
      },
      {
        question: "Schimbarea benzii fără semnalizare într-un trafic moderat.",
        image: "images/no_signal.jpg",
        options: ["Dangerous Driving", "Careless Driving", "Legal"],
        answer: 1,
        explanation: "Lipsa semnalizării la schimbarea benzii este o neatenție ce poate duce la accidente.\\n\\\"Failing to signal or observe properly before changing direction is careless and inconsiderate driving.\\\"\\n– Highway Code Rule 103"
      },
      {
        question: "Depășește coloana urcând bordura și mergând pe trotuar.",
        image: "images/curb_driving.jpg",
        options: ["Dangerous Driving", "Careless Driving", "Legal"],
        answer: 0,
        explanation: "Trecerea pe trotuar pentru a ocoli o coloană de mașini este ilegală și pune pietonii în pericol direct.\\n\\\"Driving on the pavement (footway) without lawful authority is considered dangerous.\\\"\\n– Road Traffic Act 1988, Section 2"
      },
      {
        question: "Frânează brusc în fața altui șofer din răzbunare.",
        image: "images/brake_check.jpg",
        options: ["Dangerous Driving", "Careless Driving", "Legal"],
        answer: 0,
        explanation: "Frânarea bruscă din răzbunare este un act agresiv și riscant, considerat periculos de lege.\\n\\\"Sudden braking without good reason is aggressive and dangerous driving.\\\"\\n– Highway Code Rule 147, Road Traffic Act 1988, Section 2"
      },
      {
        question: "Lasă farurile stinse pe timp de noapte.",
        image: "images/no_headlights.jpg",
        options: ["Dangerous Driving", "Careless Driving", "Legal"],
        answer: 0,
        explanation: "Conducerea pe timp de noapte fără faruri reduce drastic vizibilitatea și este considerată periculoasă.\\n\\\"At night, headlights must be used to ensure your vehicle is visible.\\\"\\n– Highway Code Rules 113–115"
      }
    ];

    let current = 0;
    let score = 0;
    let startTime = Date.now();
    const questionEl = document.getElementById('question');
    const imageEl = document.getElementById('image');
    const optionsEl = document.getElementById('options');
    const feedbackEl = document.getElementById('feedback');
    const statusEl = document.getElementById('status');
    const restartBtn = document.getElementById('restart');

    function loadQuestion() {
      updateStatus();
      const q = quiz[current];
      questionEl.textContent = q.question;
      imageEl.innerHTML = `<img src="${q.image}" alt="Imagine întrebării">`;
      optionsEl.innerHTML = '';
      feedbackEl.textContent = '';
      q.options.forEach((opt, idx) => {
        const btn = document.createElement('button');
        btn.textContent = opt;
        btn.onclick = () => handleAnswer(idx);
        optionsEl.appendChild(btn);
      });
    }

    function updateStatus() {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      statusEl.textContent = `Scor: ${score} | Timp: ${elapsed}s`;
    }

    function handleAnswer(selected) {
      const q = quiz[current];
      if (selected === q.answer) {
        score++;
        feedbackEl.textContent = "✅ Corect!\\n" + q.explanation;
      } else {
        feedbackEl.textContent = "❌ Greșit.\\n" + q.explanation;
      }
      current++;
      updateStatus();
      if (current < quiz.length) {
        setTimeout(loadQuestion, 3500);
      } else {
        setTimeout(() => {
          const elapsed = Math.floor((Date.now() - startTime) / 1000);
          questionEl.textContent = "Ai terminat testul!";
          imageEl.innerHTML = '';
          optionsEl.innerHTML = '';
          feedbackEl.textContent += `\\n\\nScor final: ${score}/${quiz.length}\\nTimp total: ${elapsed} secunde\\nMulțumim că ai jucat!`;
          restartBtn.style.display = 'block';
        }, 3500);
      }
    }

    function restartQuiz() {
      current = 0;
      score = 0;
      startTime = Date.now();
      restartBtn.style.display = 'none';
      loadQuestion();
    }

    loadQuestion();
  </script>
</body>
</html>
